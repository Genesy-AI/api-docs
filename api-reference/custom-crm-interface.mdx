---
title: 'Custom CRM Interface'
description: 'API specification for endpoints you must implement in your CRM'
icon: 'server'
---

<Warning>
  **Important**: This page describes the API endpoints that **your system must implement** to integrate with Genesy. These are not Genesy API endpoints — they are the interface specification that Genesy will call on your CRM.
</Warning>

## Overview

To integrate your custom CRM with Genesy, your system must expose a set of HTTP endpoints that Genesy will call. This page documents the exact specification your API must follow.

<Info>
  All endpoints must be accessible via HTTPS and accept the API key header you configured during connection setup.
</Info>

## Authentication

Your API must validate the API key sent in the header you specified during setup (default: `X-API-Key`).

```bash
# Genesy will send requests like this:
GET /health HTTP/1.1
Host: your-api.com
X-API-Key: your-configured-secret
Content-Type: application/json
Accept: application/json
```

<Tip>
  Return `401 Unauthorized` if the API key is invalid or missing.
</Tip>

---

## Health Endpoint

<Card title="Your Implementation Required" icon="triangle-exclamation" color="#f59e0b">
  This endpoint must be implemented on **your server**
</Card>

Genesy calls this endpoint to validate the connection during setup and periodic health checks.

### Request

```http
GET /health
```

### Headers

| Header | Description |
|--------|-------------|
| `X-API-Key` (or your custom header) | Your API key for authentication |
| `Content-Type` | `application/json` |
| `Accept` | `application/json` |

### Response

<Tabs>
  <Tab title="Success (200)">
    Return any `2xx` status code to indicate your API is healthy and the authentication is valid.
    
    ```json
    {
      "status": "ok"
    }
    ```
    
    <Note>The response body is not validated — only the HTTP status code matters.</Note>
  </Tab>
  <Tab title="Unauthorized (401)">
    Return `401` if the API key is invalid.
    
    ```json
    {
      "error": "Invalid API key"
    }
    ```
  </Tab>
</Tabs>

### Example Implementation

<CodeGroup>

```javascript Node.js (Express)
app.get('/health', (req, res) => {
  const apiKey = req.headers['x-api-key'];
  
  if (apiKey !== process.env.EXPECTED_API_KEY) {
    return res.status(401).json({ error: 'Invalid API key' });
  }
  
  res.json({ status: 'ok' });
});
```

```python Python (FastAPI)
from fastapi import FastAPI, Header, HTTPException

app = FastAPI()

@app.get("/health")
async def health(x_api_key: str = Header()):
    if x_api_key != EXPECTED_API_KEY:
        raise HTTPException(status_code=401, detail="Invalid API key")
    return {"status": "ok"}
```

```go Go
func healthHandler(w http.ResponseWriter, r *http.Request) {
    apiKey := r.Header.Get("X-API-Key")
    
    if apiKey != expectedAPIKey {
        http.Error(w, `{"error": "Invalid API key"}`, http.StatusUnauthorized)
        return
    }
    
    w.Header().Set("Content-Type", "application/json")
    w.Write([]byte(`{"status": "ok"}`))
}
```

</CodeGroup>

---

## Tasks Endpoints

<Card title="Your Implementation Required" icon="triangle-exclamation" color="#f59e0b">
  These endpoints must be implemented on **your server**
</Card>

Genesy creates tasks in your CRM when sequences trigger task actions. Your API must implement the following task endpoints.

### Create Task

Creates a new task in your CRM.

```http
POST /tasks
```

#### Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `subject` | string | ✅ Yes | The task title/subject |
| `description` | string | No | Detailed description or notes for the task |
| `type` | string | No | Task type (e.g., "call", "email", "meeting") |
| `ownerId` | string | No | ID of the user who owns the task in your system |
| `dueDate` | string (ISO 8601) | No | When the task is due (e.g., `2024-01-15T10:00:00Z`) |
| `contactId` | string | No | ID of the associated contact/lead in your CRM |
| `companyId` | string | No | ID of the associated company in your CRM |

#### Example Request

```json
{
  "subject": "Follow up with John",
  "description": "Discuss pricing proposal from last meeting",
  "type": "call",
  "ownerId": "user-123",
  "dueDate": "2024-01-15T10:00:00Z",
  "contactId": "contact-456",
  "companyId": "company-789"
}
```

#### Response

Return the created task with at least an `id` field:

```json
{
  "id": "task-abc123",
  "subject": "Follow up with John",
  "description": "Discuss pricing proposal from last meeting",
  "type": "call",
  "ownerId": "user-123",
  "dueDate": "2024-01-15T10:00:00Z",
  "contactId": "contact-456",
  "companyId": "company-789",
  "completed": false
}
```

<Warning>
  The `id` field is **required** in the response. Genesy uses this to track the task.
</Warning>

---

### Get Task

Retrieves a single task by ID.

```http
GET /tasks/:taskId
```

#### Path Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `taskId` | string | The task ID returned from create |

#### Response

```json
{
  "id": "task-abc123",
  "subject": "Follow up with John",
  "description": "Discuss pricing proposal from last meeting",
  "type": "call",
  "ownerId": "user-123",
  "dueDate": "2024-01-15T10:00:00Z",
  "contactId": "contact-456",
  "companyId": "company-789",
  "completed": false,
  "completedAt": null
}
```

---

### Update Task (Complete)

Updates a task, typically to mark it as completed.

```http
PATCH /tasks/:taskId
```

#### Path Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `taskId` | string | The task ID to update |

#### Request Body

| Field | Type | Description |
|-------|------|-------------|
| `completed` | boolean | Set to `true` to mark the task as completed |

#### Example Request

```json
{
  "completed": true
}
```

#### Response

Return the updated task:

```json
{
  "id": "task-abc123",
  "subject": "Follow up with John",
  "completed": true,
  "completedAt": "2024-01-15T11:30:00Z"
}
```

---

## Task Schema Reference

<Card title="Your Implementation Required" icon="triangle-exclamation" color="#f59e0b">
  Your responses must follow this schema
</Card>

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `id` | string | ✅ Yes | Unique identifier for the task |
| `subject` | string | ✅ Yes | Task title/subject |
| `description` | string | No | Detailed notes |
| `type` | string | No | Task category |
| `ownerId` | string | No | Assigned user ID |
| `dueDate` | string (ISO 8601) | No | Due date/time |
| `contactId` | string | No | Associated contact ID |
| `companyId` | string | No | Associated company ID |
| `completed` | boolean | No | Completion status |
| `completedAt` | string (ISO 8601) | No | When the task was completed |

---

## Error Handling

Your API should return appropriate HTTP status codes:

| Status Code | When to Use |
|-------------|-------------|
| `200` / `201` | Success |
| `400` | Invalid request body or parameters |
| `401` | Invalid or missing API key |
| `404` | Task not found |
| `500` | Server error |

Error responses should include a message:

```json
{
  "error": "Task not found",
  "message": "No task exists with ID: task-xyz"
}
```

---

## Complete Example Implementation

<CodeGroup>

```javascript Node.js (Express)
const express = require('express');
const app = express();

app.use(express.json());

// Middleware to validate API key
const validateApiKey = (req, res, next) => {
  const apiKey = req.headers['x-api-key'];
  if (apiKey !== process.env.API_KEY) {
    return res.status(401).json({ error: 'Invalid API key' });
  }
  next();
};

app.use(validateApiKey);

// Health endpoint
app.get('/health', (req, res) => {
  res.json({ status: 'ok' });
});

// Create task
app.post('/tasks', async (req, res) => {
  const { subject, description, type, ownerId, dueDate, contactId, companyId } = req.body;
  
  const task = await db.tasks.create({
    data: {
      subject,
      description,
      type,
      ownerId,
      dueDate: dueDate ? new Date(dueDate) : null,
      contactId,
      companyId,
      completed: false,
    },
  });
  
  res.status(201).json(task);
});

// Get task
app.get('/tasks/:taskId', async (req, res) => {
  const task = await db.tasks.findUnique({ where: { id: req.params.taskId } });
  
  if (!task) {
    return res.status(404).json({ error: 'Task not found' });
  }
  
  res.json(task);
});

// Update task
app.patch('/tasks/:taskId', async (req, res) => {
  const { completed } = req.body;
  
  const task = await db.tasks.update({
    where: { id: req.params.taskId },
    data: {
      completed,
      completedAt: completed ? new Date() : null,
    },
  });
  
  res.json(task);
});

app.listen(3000);
```

```python Python (FastAPI)
from fastapi import FastAPI, Header, HTTPException
from pydantic import BaseModel
from datetime import datetime
from typing import Optional
import uuid

app = FastAPI()

# In-memory storage (replace with your database)
tasks = {}

def validate_api_key(x_api_key: str = Header()):
    if x_api_key != "your-secret-key":
        raise HTTPException(status_code=401, detail="Invalid API key")
    return x_api_key

class TaskCreate(BaseModel):
    subject: str
    description: Optional[str] = None
    type: Optional[str] = None
    ownerId: Optional[str] = None
    dueDate: Optional[str] = None
    contactId: Optional[str] = None
    companyId: Optional[str] = None

class TaskUpdate(BaseModel):
    completed: Optional[bool] = None

@app.get("/health")
async def health(api_key: str = Depends(validate_api_key)):
    return {"status": "ok"}

@app.post("/tasks")
async def create_task(task: TaskCreate, api_key: str = Depends(validate_api_key)):
    task_id = str(uuid.uuid4())
    tasks[task_id] = {
        "id": task_id,
        **task.dict(),
        "completed": False,
        "completedAt": None
    }
    return tasks[task_id]

@app.get("/tasks/{task_id}")
async def get_task(task_id: str, api_key: str = Depends(validate_api_key)):
    if task_id not in tasks:
        raise HTTPException(status_code=404, detail="Task not found")
    return tasks[task_id]

@app.patch("/tasks/{task_id}")
async def update_task(task_id: str, update: TaskUpdate, api_key: str = Depends(validate_api_key)):
    if task_id not in tasks:
        raise HTTPException(status_code=404, detail="Task not found")
    
    if update.completed is not None:
        tasks[task_id]["completed"] = update.completed
        tasks[task_id]["completedAt"] = datetime.utcnow().isoformat() if update.completed else None
    
    return tasks[task_id]
```

</CodeGroup>

---

## Testing Your Implementation

Before connecting to Genesy, test your endpoints:

<Steps>
  <Step title="Test Health Endpoint">
    ```bash
    curl -X GET https://your-api.com/health \
      -H "X-API-Key: your-secret-key"
    ```
  </Step>
  <Step title="Test Task Creation">
    ```bash
    curl -X POST https://your-api.com/tasks \
      -H "X-API-Key: your-secret-key" \
      -H "Content-Type: application/json" \
      -d '{"subject": "Test task", "description": "Testing integration"}'
    ```
  </Step>
  <Step title="Connect to Genesy">
    Once your tests pass, [connect your CRM](/essentials/custom-crm#connecting-your-crm) to Genesy.
  </Step>
</Steps>
